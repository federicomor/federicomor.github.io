+++
title = "P2"
hascode = true
hasplotly = true
+++

~~~
<div class="navigation_symbols">
<form action="" method="get" onsubmit="location.href='/activity/project_euler/problem_' + this.elements[0].value; return false;" style="display:inline;">
<input title="go to problem" type="" placeholder=" " required style="margin-right: 5px; width: 40px; padding: 3px; text-align: center; border: 1px solid #666666; border-radius: 4px;">
</form>
<a href="/activity/project_euler/problem_1/" style="color: black; text-decoration: none;"><i class="fa-solid fa-arrow-left"></i></a>
<a href="/activity/project_euler" style="color: black; text-decoration: none;">üè† </a>
<a href="/activity/project_euler/problem_3/" style="color: black; text-decoration: none;"><i class="fa-solid fa-arrow-right"></i></a>
</div>
~~~

~~~
<link rel="stylesheet" type="text/css" href="/activity/project_euler/style_main.1735430422.css">
<link rel="stylesheet" type="text/css" href="/activity/project_euler/style_default.1627113674.css">
<script src="https://projecteuler.net/js/mathjax_config.js"></script>
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0&features=es6"></script>
<script id="MathJax-script" async
src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<div id="content">

<div class="center print"><img src="https://projecteuler.net/images/clipart/print_page_logo.png" alt="projecteuler.net"></div>
<h2>Even Fibonacci Numbers</h2><div id="problem_icons" class="noprint"><span class="tooltip">‚ÑπÔ∏è<span class="tooltiptext_right">Published on Friday, 19th October 2001, 06:00 pm; Solved by 812472;<br>Difficulty rating: 5%</span></span></div><div id="problem_info"><h3><a href="https://projecteuler.net/problem=2">Problem 2</a></h3></div>
<div class="problem_content" role="problem">
<p>Each new term in the Fibonacci sequence is generated by adding the previous two terms. By starting with $1$ and $2$, the first $10$ terms will be:
$$1, 2, 3, 5, 8, 13, 21, 34, 55, 89, \dots$$</p>
<p>By considering the terms in the Fibonacci sequence whose values do not exceed four million, find the sum of the even-valued terms.</p>

</div><br>
<br>
</div> <!--end_content-->
~~~
## Soluzione
Qui l'idea √® di generare, in qualche modo, in numeri di Fibonacci fino a quattro milioni, e filtrare quelli pari per sommarli ad S. La parte interessante √® come generare i numeri della sequenza di Fibonacci: un primo modo √® di aggiornarli _in place_, cio√® direttamente nel codice, come fa la linea `fibs[1], fibs[2] = sum(fibs), fibs[1]`. Altrimenti potremmo affidarci a delle funzioni, che calcolano l'$n$-esimo numero di Fibonacci. La creazione di questa funzione nella forma immediata √® molto inefficiente, mentre in quella veloce √® ottimizzata conservando i valori creati e richiamandoli per i futuri calcoli.  
```julia
S = 0
fibs = [2 1]
while fibs[1] <= 4_000_000
	if iseven(fibs[1])
		S += fibs[1]
	end
	fibs[1], fibs[2] = sum(fibs), fibs[1]
end
@show S

```

Se volessimo invece appoggiarci a delle funzioni, per generare i numeri della sequenza, queste sarebbero due possibili definizioni (scritte in forma didattica, con le varie print e il parametro depth per mostrare cosa accade materialmente quando le eseguiamo):
```julia
function fib_naive(n, depth = 0)
    println("| "^depth * "Calcolo F($n)")
    n <= 2 && return n
    return fib_naive(n-1, depth + 1) + fib_naive(n-2, depth + 1)
end
``` 
```julia-repl
julia> fib_naive(7)
Calcolo F(7)
| Calcolo F(6)
| | Calcolo F(5)
| | | Calcolo F(4)
| | | | Calcolo F(3)
| | | | | Calcolo F(2)
| | | | | Calcolo F(1)
| | | | Calcolo F(2)
| | | Calcolo F(3)
| | | | Calcolo F(2)
| | | | Calcolo F(1)
| | Calcolo F(4)
| | | Calcolo F(3)
| | | | Calcolo F(2)
| | | | Calcolo F(1)
| | | Calcolo F(2)
| Calcolo F(5)
| | Calcolo F(4)
| | | Calcolo F(3)
| | | | Calcolo F(2)
| | | | Calcolo F(1)
| | | Calcolo F(2)
| | Calcolo F(3)
| | | Calcolo F(2)
| | | Calcolo F(1)
21
```


```julia
function fib_smart(n, memo = Dict{Int,Int}(), depth = 0)
    println("| "^depth * "Calcolo F($n)")
    n <= 2 && return n
    if haskey(memo, n)
        println("| "^depth * "Ce l'avevo gi√† salvato!")
        return memo[n]
    else
        memo[n-1] = fib_smart(n-1, memo, depth + 1)
        memo[n-2] = fib_smart(n-2, memo, depth + 1)
    end
    return memo[n-1] + memo[n-2]
end
```
```julia-repl
julia> fib_smart(7)
Calcolo F(7)
| Calcolo F(6)
| | Calcolo F(5)
| | | Calcolo F(4)
| | | | Calcolo F(3)
| | | | | Calcolo F(2)
| | | | | Calcolo F(1)
| | | | Calcolo F(2)
| | | Calcolo F(3)
| | | Ce l'avevo gi√† salvato!
| | Calcolo F(4)
| | Ce l'avevo gi√† salvato!
| Calcolo F(5)
| Ce l'avevo gi√† salvato!
21
```


{{ addcomments }}
